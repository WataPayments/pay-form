"use strict";(self.webpackChunkpay=self.webpackChunkpay||[]).push([[915],{4915:(e,s,t)=>{t.d(s,{ResultPage:()=>b});var a=t(5043),c=t(7627),n=t(2809);const i=t.p+"static/media/SuccessPay.ee218e5a9cf521267a725d0ec11320a8.svg";const r=t.p+"static/media/PendingPay.632ab4ab4adc51ccfe344ee4461f497a.svg";const l=t.p+"static/media/RefundedPay.599a52fefb146725ce6592b2f9dcda9d.svg";const o=t.p+"static/media/FailPay.cf576ead76500627fe070dbadae9f94e.svg";var d=t(4117),u=t(4835),p=t(8821),g=t(3216),f=t(4111),h=t(4561),m=t.n(h),v=t(4267),x=t(880),j=t(579);const _=e=>({Paid:{title:e("result_page-paid"),icon:i},Pending:{title:e("result_page-pending"),icon:r},Expired:{title:e("result_page-expired"),icon:r},Refunded:{title:e("result_page-refunded"),icon:l},Failed:{title:e("result_page-failed"),icon:o},Created:{title:"",icon:""}}),b=()=>{const e=(0,a.useContext)(f.Dx),[s,t]=(0,a.useState)(!1),{transactionData:i,loading:r,setTransactionData:l,setRedirectUrl:o}=(0,a.useContext)(f.yI),[h,b]=(0,a.useState)(5),[y,P]=(0,a.useState)(null),{uuid:N}=(0,g.g)(),k=(0,g.Zp)(),[w,C]=(0,a.useState)(!1),{t:E}=(0,d.Bd)(),S=(0,a.useMemo)((()=>{if(i)return _(E)[i.status].icon}),[i]),D=(0,a.useMemo)((()=>{if(i)return _(E)[i.status].title}),[i]);(0,a.useEffect)((()=>{if(i&&"Paid"===i.status&&i.success_url&&null===y){const e=setInterval((()=>{b((e=>e-1))}),1e3);P(e)}}),[i,y]),(0,a.useEffect)((()=>{i&&(0,x.B)("PaymentComplete_".concat(i.status.toLowerCase()),{transaction_id:i.uuid,payment_method:i.methods})}),[i]),(0,a.useEffect)((()=>{0===h&&i&&i.success_url&&(clearInterval(y),window.location.href=i.success_url)}),[h,y,i]);const I=(0,a.useMemo)((()=>E(0===h||5===h?"result_page-second1":1===h?"result_page-second2":"result_page-second3")),[h,E]);return(0,a.useEffect)((()=>{if(i&&"Pending"===i.status&&!w){let e=null;C(!0);const s=async()=>{try{const{transactionData:s,redirectUrl:t}=await u.A.fetchTransactionData(N);l(s),o(t),"Pending"!==s.status&&(C(!1),clearInterval(e))}catch(s){if(console.error("Error fetching transaction data:",s),(0,p.F0)(s)&&s.request){if(404===s.request.status)return void k("/404");if(500===s.request.status)return void k("/500")}}};e=setInterval((()=>{s()}),5e3)}}),[i,w]),r?(0,j.jsx)("div",{className:"loader-block ".concat(e),children:(0,j.jsx)("span",{className:"loader"})}):(0,j.jsxs)("div",{className:"result-container",style:m()()?{marginTop:"20px"}:{},children:[(0,j.jsxs)("div",{className:"result-block ".concat(e),children:[(0,j.jsxs)("div",{className:"page-title",children:[i&&"Pending"===i.status?(0,j.jsx)("div",{className:"pending-block",children:(0,j.jsx)("span",{className:"loader-pending"})}):(0,j.jsx)("img",{src:S,alt:"Result-pay"}),(0,j.jsx)("p",{children:D})]}),i&&"Pending"===i.status&&(0,j.jsx)("div",{className:"pending-transaction",children:(0,j.jsx)("div",{className:"alert",children:E("result_page-pending-alert")})}),(0,j.jsx)("div",{className:"divider"}),(0,j.jsx)(v.z,{transactionData:i}),i&&"Paid"===i.status?i.success_url?(0,j.jsxs)("div",{className:"countdown",children:[E("result_page-redirect")," ",h," ",I,"..."]}):(0,j.jsxs)("div",{className:"button-container",children:[(0,j.jsx)("div",{className:"submit-button-result ".concat(e),children:(0,j.jsx)("input",{type:"button",value:E("result_page-share"),onClick:()=>{navigator.share?navigator.share({title:"Success Page",text:"I successfully paid the bill!",url:window.location.href}).then((()=>console.log("Successfully shared"))).catch((e=>console.error("Error sharing:",e))):navigator.clipboard.writeText(window.location.href).then((()=>console.log("Link copied to clipboard"))).catch((e=>console.error("Error copying link:",e))),t((e=>!e)),setTimeout((()=>{t((e=>!e))}),2e3)}})}),s&&!m()()&&(0,j.jsx)("div",{className:"tooltip",children:E("result_page-link-copied")})]}):null]}),(0,j.jsx)("div",{className:"logo ".concat(e),children:(0,j.jsx)("img",{src:"dark"===e?c.A:n.A,alt:"WATA"})})]})}}}]);
//# sourceMappingURL=915.52d2f25b.chunk.js.map